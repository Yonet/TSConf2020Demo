(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{128:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(3),n=r(53),s=r(213),o=r(214),a=r(215),h=function(e){function t(t){var r=e.call(this,t)||this;return r._mouseInput=null,r}return Object(i.d)(t,e),t.prototype.addKeyboard=function(){return this.add(new s.a),this},t.prototype.addMouse=function(e){return void 0===e&&(e=!0),this._mouseInput||(this._mouseInput=new o.a(e),this.add(this._mouseInput)),this},t.prototype.removeMouse=function(){return this._mouseInput&&this.remove(this._mouseInput),this},t.prototype.addTouch=function(){return this.add(new a.a),this},t.prototype.clear=function(){e.prototype.clear.call(this),this._mouseInput=null},t}(n.b)},129:function(e,t,r){"use strict";var i=r(3),n=r(9),s=r(1),o=r(18),a=r(4);a.a.prototype.createRenderTargetTexture=function(e,t){var r=new o.a;void 0!==t&&"object"==typeof t?(r.generateMipMaps=t.generateMipMaps,r.generateDepthBuffer=!!t.generateDepthBuffer,r.generateStencilBuffer=!!t.generateStencilBuffer,r.type=void 0===t.type?0:t.type,r.samplingMode=void 0===t.samplingMode?3:t.samplingMode,r.format=void 0===t.format?5:t.format):(r.generateMipMaps=t,r.generateDepthBuffer=!0,r.generateStencilBuffer=!1,r.type=0,r.samplingMode=3,r.format=5),(1!==r.type||this._caps.textureFloatLinearFiltering)&&(2!==r.type||this._caps.textureHalfFloatLinearFiltering)||(r.samplingMode=1),1!==r.type||this._caps.textureFloat||(r.type=0,s.a.Warn("Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type"));var i=this._gl,a=new n.a(this,n.b.RenderTarget),h=e.width||e,c=e.height||e,u=e.layers||0,p=this._getSamplingParameters(r.samplingMode,!!r.generateMipMaps),l=0!==u?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D,d=this._getRGBABufferInternalSizedFormat(r.type,r.format),f=this._getInternalFormat(r.format),_=this._getWebGLTextureType(r.type);this._bindTextureDirectly(l,a),0!==u?(a.is2DArray=!0,i.texImage3D(l,0,d,h,c,u,0,f,_,null)):i.texImage2D(l,0,d,h,c,0,f,_,null),i.texParameteri(l,i.TEXTURE_MAG_FILTER,p.mag),i.texParameteri(l,i.TEXTURE_MIN_FILTER,p.min),i.texParameteri(l,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(l,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),r.generateMipMaps&&this._gl.generateMipmap(l),this._bindTextureDirectly(l,null);var g=i.createFramebuffer();return this._bindUnboundFramebuffer(g),a._depthStencilBuffer=this._setupFramebufferDepthAttachments(!!r.generateStencilBuffer,r.generateDepthBuffer,h,c),a.is2DArray||i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a._webGLTexture,0),this._bindUnboundFramebuffer(null),a._framebuffer=g,a.baseWidth=h,a.baseHeight=c,a.width=h,a.height=c,a.depth=u,a.isReady=!0,a.samples=1,a.generateMipMaps=!!r.generateMipMaps,a.samplingMode=r.samplingMode,a.type=r.type,a.format=r.format,a._generateDepthBuffer=r.generateDepthBuffer,a._generateStencilBuffer=!!r.generateStencilBuffer,this._internalTexturesCache.push(a),a},a.a.prototype.createDepthStencilTexture=function(e,t){if(t.isCube){var r=e.width||e;return this._createDepthStencilCubeTexture(r,t)}return this._createDepthStencilTexture(e,t)},a.a.prototype._createDepthStencilTexture=function(e,t){var r=this._gl,o=e.layers||0,a=0!==o?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D,h=new n.a(this,n.b.Depth);if(!this._caps.depthTextureExtension)return s.a.Error("Depth texture is not supported by your browser or hardware."),h;var c=Object(i.a)({bilinearFiltering:!1,comparisonFunction:0,generateStencil:!1},t);this._bindTextureDirectly(a,h,!0),this._setupDepthStencilTexture(h,e,c.generateStencil,c.bilinearFiltering,c.comparisonFunction);var u=c.generateStencil?r.UNSIGNED_INT_24_8:r.UNSIGNED_INT,p=c.generateStencil?r.DEPTH_STENCIL:r.DEPTH_COMPONENT,l=p;return this.webGLVersion>1&&(l=c.generateStencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24),h.is2DArray?r.texImage3D(a,0,l,h.width,h.height,o,0,p,u,null):r.texImage2D(a,0,l,h.width,h.height,0,p,u,null),this._bindTextureDirectly(a,null),h}},145:function(e,t,r){"use strict";var i=r(3),n=r(9),s=r(1);r(4).a.prototype.createRenderTargetCubeTexture=function(e,t){var r=Object(i.a)({generateMipMaps:!0,generateDepthBuffer:!0,generateStencilBuffer:!1,type:0,samplingMode:3,format:5},t);r.generateStencilBuffer=r.generateDepthBuffer&&r.generateStencilBuffer,(1!==r.type||this._caps.textureFloatLinearFiltering)&&(2!==r.type||this._caps.textureHalfFloatLinearFiltering)||(r.samplingMode=1);var o=this._gl,a=new n.a(this,n.b.RenderTarget);this._bindTextureDirectly(o.TEXTURE_CUBE_MAP,a,!0);var h=this._getSamplingParameters(r.samplingMode,r.generateMipMaps);1!==r.type||this._caps.textureFloat||(r.type=0,s.a.Warn("Float textures are not supported. Cube render target forced to TEXTURETYPE_UNESIGNED_BYTE type")),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,h.mag),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,h.min),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);for(var c=0;c<6;c++)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,this._getRGBABufferInternalSizedFormat(r.type,r.format),e,e,0,this._getInternalFormat(r.format),this._getWebGLTextureType(r.type),null);var u=o.createFramebuffer();return this._bindUnboundFramebuffer(u),a._depthStencilBuffer=this._setupFramebufferDepthAttachments(r.generateStencilBuffer,r.generateDepthBuffer,e,e),r.generateMipMaps&&o.generateMipmap(o.TEXTURE_CUBE_MAP),this._bindTextureDirectly(o.TEXTURE_CUBE_MAP,null),this._bindUnboundFramebuffer(null),a._framebuffer=u,a.width=e,a.height=e,a.isReady=!0,a.isCube=!0,a.samples=1,a.generateMipMaps=r.generateMipMaps,a.samplingMode=r.samplingMode,a.type=r.type,a.format=r.format,a._generateDepthBuffer=r.generateDepthBuffer,a._generateStencilBuffer=r.generateStencilBuffer,this._internalTexturesCache.push(a),a}},213:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(3),n=r(37),s=r(53),o=r(107),a=r(34),h=function(){function e(){this.keysUp=[38],this.keysUpward=[33],this.keysDown=[40],this.keysDownward=[34],this.keysLeft=[37],this.keysRight=[39],this._keys=new Array}return e.prototype.attachControl=function(e,t){var r=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add((function(){r._keys=[]})),this._onKeyboardObserver=this._scene.onKeyboardObservable.add((function(e){var i,n=e.event;n.metaKey||(e.type===o.a.KEYDOWN?-1===r.keysUp.indexOf(n.keyCode)&&-1===r.keysDown.indexOf(n.keyCode)&&-1===r.keysLeft.indexOf(n.keyCode)&&-1===r.keysRight.indexOf(n.keyCode)&&-1===r.keysUpward.indexOf(n.keyCode)&&-1===r.keysDownward.indexOf(n.keyCode)||(-1===(i=r._keys.indexOf(n.keyCode))&&r._keys.push(n.keyCode),t||n.preventDefault()):-1===r.keysUp.indexOf(n.keyCode)&&-1===r.keysDown.indexOf(n.keyCode)&&-1===r.keysLeft.indexOf(n.keyCode)&&-1===r.keysRight.indexOf(n.keyCode)&&-1===r.keysUpward.indexOf(n.keyCode)&&-1===r.keysDownward.indexOf(n.keyCode)||((i=r._keys.indexOf(n.keyCode))>=0&&r._keys.splice(i,1),t||n.preventDefault()))})))},e.prototype.detachControl=function(e){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},e.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var e=this.camera,t=0;t<this._keys.length;t++){var r=this._keys[t],i=e._computeLocalCameraSpeed();-1!==this.keysLeft.indexOf(r)?e._localDirection.copyFromFloats(-i,0,0):-1!==this.keysUp.indexOf(r)?e._localDirection.copyFromFloats(0,0,i):-1!==this.keysRight.indexOf(r)?e._localDirection.copyFromFloats(i,0,0):-1!==this.keysDown.indexOf(r)?e._localDirection.copyFromFloats(0,0,-i):-1!==this.keysUpward.indexOf(r)?e._localDirection.copyFromFloats(0,i,0):-1!==this.keysDownward.indexOf(r)&&e._localDirection.copyFromFloats(0,-i,0),e.getScene().useRightHandedSystem&&(e._localDirection.z*=-1),e.getViewMatrix().invertToRef(e._cameraTransformMatrix),a.e.TransformNormalToRef(e._localDirection,e._cameraTransformMatrix,e._transformedDirection),e.cameraDirection.addInPlace(e._transformedDirection)}},e.prototype.getClassName=function(){return"FreeCameraKeyboardMoveInput"},e.prototype._onLostFocus=function(){this._keys=[]},e.prototype.getSimpleName=function(){return"keyboard"},Object(i.c)([Object(n.c)()],e.prototype,"keysUp",void 0),Object(i.c)([Object(n.c)()],e.prototype,"keysUpward",void 0),Object(i.c)([Object(n.c)()],e.prototype,"keysDown",void 0),Object(i.c)([Object(n.c)()],e.prototype,"keysDownward",void 0),Object(i.c)([Object(n.c)()],e.prototype,"keysLeft",void 0),Object(i.c)([Object(n.c)()],e.prototype,"keysRight",void 0),e}();s.a.FreeCameraKeyboardMoveInput=h},214:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(3),n=r(0),s=r(37),o=r(53),a=r(58),h=function(){function e(e){void 0===e&&(e=!0),this.touchEnabled=e,this.buttons=[0,1,2],this.angularSensibility=2e3,this.previousPosition=null,this.onPointerMovedObservable=new n.a,this._allowCameraRotation=!0}return e.prototype.attachControl=function(e,t){var r=this,i=this.camera.getEngine();this._pointerInput||(this._pointerInput=function(n){var s=n.event;if(!i.isInVRExclusivePointerMode&&(r.touchEnabled||"touch"!==s.pointerType)&&(n.type===a.a.POINTERMOVE||-1!==r.buttons.indexOf(s.button))){var o=s.srcElement||s.target;if(n.type===a.a.POINTERDOWN&&o){try{o.setPointerCapture(s.pointerId)}catch(e){}r.previousPosition={x:s.clientX,y:s.clientY},t||(s.preventDefault(),e.focus())}else if(n.type===a.a.POINTERUP&&o){try{o.releasePointerCapture(s.pointerId)}catch(e){}r.previousPosition=null,t||s.preventDefault()}else if(n.type===a.a.POINTERMOVE){if(!r.previousPosition||i.isPointerLock)return;var h=s.clientX-r.previousPosition.x,c=s.clientY-r.previousPosition.y;r.camera.getScene().useRightHandedSystem&&(h*=-1),r.camera.parent&&r.camera.parent._getWorldMatrixDeterminant()<0&&(h*=-1),r._allowCameraRotation&&(r.camera.cameraRotation.y+=h/r.angularSensibility,r.camera.cameraRotation.x+=c/r.angularSensibility),r.onPointerMovedObservable.notifyObservers({offsetX:h,offsetY:c}),r.previousPosition={x:s.clientX,y:s.clientY},t||s.preventDefault()}}}),this._onMouseMove=function(e){if(i.isPointerLock&&!i.isInVRExclusivePointerMode){var n=e.movementX||e.mozMovementX||e.webkitMovementX||e.msMovementX||0;r.camera.getScene().useRightHandedSystem&&(n*=-1),r.camera.parent&&r.camera.parent._getWorldMatrixDeterminant()<0&&(n*=-1),r.camera.cameraRotation.y+=n/r.angularSensibility;var s=e.movementY||e.mozMovementY||e.webkitMovementY||e.msMovementY||0;r.camera.cameraRotation.x+=s/r.angularSensibility,r.previousPosition=null,t||e.preventDefault()}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,a.a.POINTERDOWN|a.a.POINTERUP|a.a.POINTERMOVE),e.addEventListener("mousemove",this._onMouseMove,!1),e.addEventListener("contextmenu",this.onContextMenu.bind(this),!1)},e.prototype.onContextMenu=function(e){e.preventDefault()},e.prototype.detachControl=function(e){this._observer&&e&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._onMouseMove&&e.removeEventListener("mousemove",this._onMouseMove),this.onContextMenu&&e.removeEventListener("contextmenu",this.onContextMenu),this.onPointerMovedObservable&&this.onPointerMovedObservable.clear(),this._observer=null,this._onMouseMove=null,this.previousPosition=null)},e.prototype.getClassName=function(){return"FreeCameraMouseInput"},e.prototype.getSimpleName=function(){return"mouse"},Object(i.c)([Object(s.c)()],e.prototype,"buttons",void 0),Object(i.c)([Object(s.c)()],e.prototype,"angularSensibility",void 0),e}();o.a.FreeCameraMouseInput=h},215:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(3),n=r(37),s=r(53),o=r(58),a=r(34),h=function(){function e(e){void 0===e&&(e=!1),this.allowMouse=e,this.touchAngularSensibility=2e5,this.touchMoveSensibility=250,this._offsetX=null,this._offsetY=null,this._pointerPressed=new Array}return e.prototype.attachControl=function(e,t){var r=this,i=null;void 0===this._pointerInput&&(this._onLostFocus=function(){r._offsetX=null,r._offsetY=null},this._pointerInput=function(e){var n=e.event,s=!r.camera.getEngine().hostInformation.isMobile&&n instanceof MouseEvent;if(r.allowMouse||"mouse"!==n.pointerType&&!s)if(e.type===o.a.POINTERDOWN){if(t||n.preventDefault(),r._pointerPressed.push(n.pointerId),1!==r._pointerPressed.length)return;i={x:n.clientX,y:n.clientY}}else if(e.type===o.a.POINTERUP){if(t||n.preventDefault(),-1===(a=r._pointerPressed.indexOf(n.pointerId)))return;if(r._pointerPressed.splice(a,1),0!=a)return;i=null,r._offsetX=null,r._offsetY=null}else if(e.type===o.a.POINTERMOVE){if(t||n.preventDefault(),!i)return;var a;if(0!=(a=r._pointerPressed.indexOf(n.pointerId)))return;r._offsetX=n.clientX-i.x,r._offsetY=-(n.clientY-i.y)}}),this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,o.a.POINTERDOWN|o.a.POINTERUP|o.a.POINTERMOVE),this._onLostFocus&&e.addEventListener("blur",this._onLostFocus)},e.prototype.detachControl=function(e){this._pointerInput&&e&&(this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null),this._onLostFocus&&(e.removeEventListener("blur",this._onLostFocus),this._onLostFocus=null),this._pointerPressed=[],this._offsetX=null,this._offsetY=null)},e.prototype.checkInputs=function(){if(this._offsetX&&this._offsetY){var e=this.camera;if(e.cameraRotation.y+=this._offsetX/this.touchAngularSensibility,this._pointerPressed.length>1)e.cameraRotation.x+=-this._offsetY/this.touchAngularSensibility;else{var t=e._computeLocalCameraSpeed(),r=new a.e(0,0,t*this._offsetY/this.touchMoveSensibility);a.a.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,0,e._cameraRotationMatrix),e.cameraDirection.addInPlace(a.e.TransformCoordinates(r,e._cameraRotationMatrix))}}},e.prototype.getClassName=function(){return"FreeCameraTouchInput"},e.prototype.getSimpleName=function(){return"touch"},Object(i.c)([Object(n.c)()],e.prototype,"touchAngularSensibility",void 0),Object(i.c)([Object(n.c)()],e.prototype,"touchMoveSensibility",void 0),e}();s.a.FreeCameraTouchInput=h},56:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(3),n=r(0),s=r(41),o=r(34),a=r(39),h=r(141),c=r(142),u=(r(129),r(145),r(14)),p=function(e){function t(t,r,i,s,h,u,p,l,d,f,_,g,b){void 0===h&&(h=!0),void 0===u&&(u=0),void 0===p&&(p=!1),void 0===l&&(l=a.a.TRILINEAR_SAMPLINGMODE),void 0===d&&(d=!0),void 0===f&&(f=!1),void 0===_&&(_=!1),void 0===g&&(g=5),void 0===b&&(b=!1);var v=e.call(this,null,i,!s)||this;return v.renderParticles=!0,v.renderSprites=!1,v.ignoreCameraViewport=!1,v.onBeforeBindObservable=new n.a,v.onAfterUnbindObservable=new n.a,v.onBeforeRenderObservable=new n.a,v.onAfterRenderObservable=new n.a,v.onClearObservable=new n.a,v.onResizeObservable=new n.a,v._currentRefreshId=-1,v._refreshRate=1,v._samples=1,v.boundingBoxPosition=o.e.Zero(),(i=v.getScene())?(v._coordinatesMode=a.a.PROJECTION_MODE,v.renderList=new Array,v.name=t,v.isRenderTarget=!0,v._initialSizeParameter=r,v._processSizeParameter(r),v._resizeObserver=v.getScene().getEngine().onResizeObservable.add((function(){})),v._generateMipMaps=!!s,v._doNotChangeAspectRatio=h,v._renderingManager=new c.a(i),v._renderingManager._useSceneAutoClearSetup=!0,_||(v._renderTargetOptions={generateMipMaps:s,type:u,format:g,samplingMode:l,generateDepthBuffer:d,generateStencilBuffer:f},l===a.a.NEAREST_SAMPLINGMODE&&(v.wrapU=a.a.CLAMP_ADDRESSMODE,v.wrapV=a.a.CLAMP_ADDRESSMODE),b||(p?(v._texture=i.getEngine().createRenderTargetCubeTexture(v.getRenderSize(),v._renderTargetOptions),v.coordinatesMode=a.a.INVCUBIC_MODE,v._textureMatrix=o.a.Identity()):v._texture=i.getEngine().createRenderTargetTexture(v._size,v._renderTargetOptions))),v):v}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"renderList",{get:function(){return this._renderList},set:function(e){this._renderList=e,this._renderList&&this._hookArray(this._renderList)},enumerable:!1,configurable:!0}),t.prototype._hookArray=function(e){var t=this,r=e.push;e.push=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var s=0===e.length,o=r.apply(e,i);return s&&t.getScene()&&t.getScene().meshes.forEach((function(e){e._markSubMeshesAsLightDirty()})),o};var i=e.splice;e.splice=function(r,n){var s=i.apply(e,[r,n]);return 0===e.length&&t.getScene().meshes.forEach((function(e){e._markSubMeshesAsLightDirty()})),s}},Object.defineProperty(t.prototype,"onAfterUnbind",{set:function(e){this._onAfterUnbindObserver&&this.onAfterUnbindObservable.remove(this._onAfterUnbindObserver),this._onAfterUnbindObserver=this.onAfterUnbindObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBeforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onAfterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onClear",{set:function(e){this._onClearObserver&&this.onClearObservable.remove(this._onClearObserver),this._onClearObserver=this.onClearObservable.add(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderTargetOptions",{get:function(){return this._renderTargetOptions},enumerable:!1,configurable:!0}),t.prototype._onRatioRescale=function(){this._sizeRatio&&this.resize(this._initialSizeParameter)},Object.defineProperty(t.prototype,"boundingBoxSize",{get:function(){return this._boundingBoxSize},set:function(e){if(!this._boundingBoxSize||!this._boundingBoxSize.equals(e)){this._boundingBoxSize=e;var t=this.getScene();t&&t.markAllMaterialsAsDirty(1)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthStencilTexture",{get:function(){var e;return(null===(e=this.getInternalTexture())||void 0===e?void 0:e._depthStencilTexture)||null},enumerable:!1,configurable:!0}),t.prototype.createDepthStencilTexture=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=!0),void 0===r&&(r=!1);var i=this.getInternalTexture();if(this.getScene()&&i){var n=this.getScene().getEngine();i._depthStencilTexture=n.createDepthStencilTexture(this._size,{bilinearFiltering:t,comparisonFunction:e,generateStencil:r,isCube:this.isCube})}},t.prototype._processSizeParameter=function(e){if(e.ratio){this._sizeRatio=e.ratio;var t=this._getEngine();this._size={width:this._bestReflectionRenderTargetDimension(t.getRenderWidth(),this._sizeRatio),height:this._bestReflectionRenderTargetDimension(t.getRenderHeight(),this._sizeRatio)}}else this._size=e},Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},set:function(e){if(this._samples!==e){var t=this.getScene();t&&(this._samples=t.getEngine().updateRenderTargetTextureSampleCount(this._texture,e))}},enumerable:!1,configurable:!0}),t.prototype.resetRefreshCounter=function(){this._currentRefreshId=-1},Object.defineProperty(t.prototype,"refreshRate",{get:function(){return this._refreshRate},set:function(e){this._refreshRate=e,this.resetRefreshCounter()},enumerable:!1,configurable:!0}),t.prototype.addPostProcess=function(e){if(!this._postProcessManager){var t=this.getScene();if(!t)return;this._postProcessManager=new h.a(t),this._postProcesses=new Array}this._postProcesses.push(e),this._postProcesses[0].autoClear=!1},t.prototype.clearPostProcesses=function(e){if(void 0===e&&(e=!1),this._postProcesses){if(e)for(var t=0,r=this._postProcesses;t<r.length;t++){r[t].dispose()}this._postProcesses=[]}},t.prototype.removePostProcess=function(e){if(this._postProcesses){var t=this._postProcesses.indexOf(e);-1!==t&&(this._postProcesses.splice(t,1),this._postProcesses.length>0&&(this._postProcesses[0].autoClear=!1))}},t.prototype._shouldRender=function(){return-1===this._currentRefreshId||this.refreshRate===this._currentRefreshId?(this._currentRefreshId=1,!0):(this._currentRefreshId++,!1)},t.prototype.getRenderSize=function(){return this.getRenderWidth()},t.prototype.getRenderWidth=function(){return this._size.width?this._size.width:this._size},t.prototype.getRenderHeight=function(){return this._size.width?this._size.height:this._size},t.prototype.getRenderLayers=function(){var e=this._size.layers;return e||0},Object.defineProperty(t.prototype,"canRescale",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.scale=function(e){var t=Math.max(1,this.getRenderSize()*e);this.resize(t)},t.prototype.getReflectionTextureMatrix=function(){return this.isCube?this._textureMatrix:e.prototype.getReflectionTextureMatrix.call(this)},t.prototype.resize=function(e){var t=this.isCube;this.releaseInternalTexture();var r=this.getScene();r&&(this._processSizeParameter(e),this._texture=t?r.getEngine().createRenderTargetCubeTexture(this.getRenderSize(),this._renderTargetOptions):r.getEngine().createRenderTargetTexture(this._size,this._renderTargetOptions),this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this))},t.prototype.render=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),a=this.getScene()){var r,i=a.getEngine();if(void 0!==this.useCameraPostProcesses&&(e=this.useCameraPostProcesses),this._waitingRenderList){this.renderList=[];for(var n=0;n<this._waitingRenderList.length;n++){var s=this._waitingRenderList[n],o=a.getMeshByID(s);o&&this.renderList.push(o)}this._waitingRenderList=void 0}if(this.renderListPredicate){var a;if(this.renderList?this.renderList.length=0:this.renderList=[],!(a=this.getScene()))return;var h=a.meshes;for(n=0;n<h.length;n++){var c=h[n];this.renderListPredicate(c)&&this.renderList.push(c)}}if(this.onBeforeBindObservable.notifyObservers(this),this.activeCamera?(r=this.activeCamera,i.setViewport(this.activeCamera.viewport,this.getRenderWidth(),this.getRenderHeight()),this.activeCamera!==a.activeCamera&&a.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(!0))):(r=a.activeCamera)&&i.setViewport(r.viewport,this.getRenderWidth(),this.getRenderHeight()),this._defaultRenderListPrepared=!1,this.is2DArray)for(var u=0;u<this.getRenderLayers();u++)this.renderToTarget(0,e,t,u,r),a.incrementRenderId(),a.resetCachedMaterial();else if(this.isCube)for(var p=0;p<6;p++)this.renderToTarget(p,e,t,void 0,r),a.incrementRenderId(),a.resetCachedMaterial();else this.renderToTarget(0,e,t,void 0,r);this.onAfterUnbindObservable.notifyObservers(this),a.activeCamera&&((a.getEngine().scenes.length>1||this.activeCamera&&this.activeCamera!==a.activeCamera)&&a.setTransformMatrix(a.activeCamera.getViewMatrix(),a.activeCamera.getProjectionMatrix(!0)),i.setViewport(a.activeCamera.viewport)),a.resetCachedMaterial()}},t.prototype._bestReflectionRenderTargetDimension=function(e,t){var r=e*t,i=u.a.NearestPOT(r+16384/(128+r));return Math.min(u.a.FloorPOT(e),i)},t.prototype._prepareRenderingManager=function(e,t,r,i){var n=this.getScene();if(n){this._renderingManager.reset();for(var s=n.getRenderId(),o=0;o<t;o++){var a=e[o];if(a){if(this.customIsReadyFunction){if(!this.customIsReadyFunction(a,this.refreshRate)){this.resetRefreshCounter();continue}}else if(!a.isReady(0===this.refreshRate)){this.resetRefreshCounter();continue}a._preActivateForIntermediateRendering(s);var h=void 0;if(h=!(!i||!r)&&0==(a.layerMask&r.layerMask),a.isEnabled()&&a.isVisible&&a.subMeshes&&!h&&a._activate(s,!0)&&a.subMeshes.length){a.isAnInstance?a._internalAbstractMeshDataInfo._actAsRegularMesh||(a=a.sourceMesh):a._internalAbstractMeshDataInfo._onlyForInstancesIntermediate=!1,a._internalAbstractMeshDataInfo._isActiveIntermediate=!0;for(var c=0;c<a.subMeshes.length;c++){var u=a.subMeshes[c];this._renderingManager.dispatch(u,a)}}}}for(var p=0;p<n.particleSystems.length;p++){var l=n.particleSystems[p],d=l.emitter;l.isStarted()&&d&&d.position&&d.isEnabled()&&(e.indexOf(d)>=0&&this._renderingManager.dispatchParticles(l))}}},t.prototype._bindFrameBuffer=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var r=this.getScene();if(r){var i=r.getEngine();this._texture&&i.bindFramebuffer(this._texture,this.isCube?e:void 0,void 0,void 0,this.ignoreCameraViewport,0,t)}},t.prototype.unbindFrameBuffer=function(e,t){var r=this;this._texture&&e.unBindFramebuffer(this._texture,this.isCube,(function(){r.onAfterRenderObservable.notifyObservers(t)}))},t.prototype.renderToTarget=function(e,t,r,i,n){void 0===i&&(i=0),void 0===n&&(n=null);var o=this.getScene();if(o){var a=o.getEngine();if(this._texture){this._postProcessManager?this._postProcessManager._prepareFrame(this._texture,this._postProcesses):t&&o.postProcessManager._prepareFrame(this._texture)||this._bindFrameBuffer(e,i),this.is2DArray?this.onBeforeRenderObservable.notifyObservers(i):this.onBeforeRenderObservable.notifyObservers(e);var h=null,c=this.renderList?this.renderList:o.getActiveMeshes().data,u=this.renderList?this.renderList.length:o.getActiveMeshes().length;this.getCustomRenderList&&(h=this.getCustomRenderList(this.is2DArray?i:e,c,u)),h?this._prepareRenderingManager(h,h.length,n,!1):(this._defaultRenderListPrepared||(this._prepareRenderingManager(c,u,n,!this.renderList),this._defaultRenderListPrepared=!0),h=c),this.onClearObservable.hasObservers()?this.onClearObservable.notifyObservers(a):a.clear(this.clearColor||o.clearColor,!0,!0,!0),this._doNotChangeAspectRatio||o.updateTransformMatrix(!0);for(var p=0,l=o._beforeRenderTargetDrawStage;p<l.length;p++){l[p].action(this)}this._renderingManager.render(this.customRenderFunction,h,this.renderParticles,this.renderSprites);for(var d=0,f=o._afterRenderTargetDrawStage;d<f.length;d++){f[d].action(this)}this._postProcessManager?this._postProcessManager._finalizeFrame(!1,this._texture,e,this._postProcesses,this.ignoreCameraViewport):t&&o.postProcessManager._finalizeFrame(!1,this._texture,e),this._doNotChangeAspectRatio||o.updateTransformMatrix(!0),r&&s.b.DumpFramebuffer(this.getRenderWidth(),this.getRenderHeight(),a),this.isCube&&5!==e?this.onAfterRenderObservable.notifyObservers(e):(this.isCube&&5===e&&a.generateMipMapsForCubemap(this._texture),this.unbindFrameBuffer(a,e))}}},t.prototype.setRenderingOrder=function(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=null),this._renderingManager.setRenderingOrder(e,t,r,i)},t.prototype.setRenderingAutoClearDepthStencil=function(e,t){this._renderingManager.setRenderingAutoClearDepthStencil(e,t),this._renderingManager._useSceneAutoClearSetup=!1},t.prototype.clone=function(){var e=this.getSize(),r=new t(this.name,e,this.getScene(),this._renderTargetOptions.generateMipMaps,this._doNotChangeAspectRatio,this._renderTargetOptions.type,this.isCube,this._renderTargetOptions.samplingMode,this._renderTargetOptions.generateDepthBuffer,this._renderTargetOptions.generateStencilBuffer);return r.hasAlpha=this.hasAlpha,r.level=this.level,r.coordinatesMode=this.coordinatesMode,this.renderList&&(r.renderList=this.renderList.slice(0)),r},t.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);if(t.renderTargetSize=this.getRenderSize(),t.renderList=[],this.renderList)for(var r=0;r<this.renderList.length;r++)t.renderList.push(this.renderList[r].id);return t},t.prototype.disposeFramebufferObjects=function(){var e=this.getInternalTexture(),t=this.getScene();e&&t&&t.getEngine()._releaseFramebufferObjects(e)},t.prototype.dispose=function(){this.onResizeObservable.clear(),this.onClearObservable.clear(),this.onAfterRenderObservable.clear(),this.onAfterUnbindObservable.clear(),this.onBeforeBindObservable.clear(),this.onBeforeRenderObservable.clear(),this._postProcessManager&&(this._postProcessManager.dispose(),this._postProcessManager=null),this.clearPostProcesses(!0),this._resizeObserver&&(this.getScene().getEngine().onResizeObservable.remove(this._resizeObserver),this._resizeObserver=null),this.renderList=null;var t=this.getScene();if(t){var r=t.customRenderTargets.indexOf(this);r>=0&&t.customRenderTargets.splice(r,1);for(var i=0,n=t.cameras;i<n.length;i++){var s=n[i];(r=s.customRenderTargets.indexOf(this))>=0&&s.customRenderTargets.splice(r,1)}this.depthStencilTexture&&this.getScene().getEngine()._releaseTexture(this.depthStencilTexture),e.prototype.dispose.call(this)}},t.prototype._rebuild=function(){this.refreshRate===t.REFRESHRATE_RENDER_ONCE&&(this.refreshRate=t.REFRESHRATE_RENDER_ONCE),this._postProcessManager&&this._postProcessManager._rebuild()},t.prototype.freeRenderingGroups=function(){this._renderingManager&&this._renderingManager.freeRenderingGroups()},t.prototype.getViewCount=function(){return 1},t.REFRESHRATE_RENDER_ONCE=0,t.REFRESHRATE_RENDER_ONEVERYFRAME=1,t.REFRESHRATE_RENDER_ONEVERYTWOFRAMES=2,t}(a.a);a.a._CreateRenderTargetTexture=function(e,t,r,i){return new p(e,t,r,i)}},66:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(3),n=r(37),s=r(34),o=r(14),a=r(92),h=r(128),c=function(e){function t(t,r,i,n){void 0===n&&(n=!0);var a=e.call(this,t,r,i,n)||this;return a.ellipsoid=new s.e(.5,1,.5),a.ellipsoidOffset=new s.e(0,0,0),a.checkCollisions=!1,a.applyGravity=!1,a._needMoveForGravity=!1,a._oldPosition=s.e.Zero(),a._diffPosition=s.e.Zero(),a._newPosition=s.e.Zero(),a._collisionMask=-1,a._onCollisionPositionChange=function(e,t,r){void 0===r&&(r=null);var i;i=t,a._newPosition.copyFrom(i),a._newPosition.subtractToRef(a._oldPosition,a._diffPosition),a._diffPosition.length()>o.a.CollisionsEpsilon&&(a.position.addInPlace(a._diffPosition),a.onCollide&&r&&a.onCollide(r))},a.inputs=new h.a(a),a.inputs.addKeyboard().addMouse(),a}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"angularSensibility",{get:function(){var e=this.inputs.attached.mouse;return e?e.angularSensibility:0},set:function(e){var t=this.inputs.attached.mouse;t&&(t.angularSensibility=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keysUp",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysUp:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysUp=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keysUpward",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysUpward:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysUpward=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keysDown",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysDown:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysDown=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keysDownward",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysDownward:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysDownward=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keysLeft",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysLeft:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysLeft=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keysRight",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysRight:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysRight=e)},enumerable:!1,configurable:!0}),t.prototype.attachControl=function(e,t){this.inputs.attachElement(e,t)},t.prototype.detachControl=function(e){this.inputs.detachElement(e),this.cameraDirection=new s.e(0,0,0),this.cameraRotation=new s.d(0,0)},Object.defineProperty(t.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(e){this._collisionMask=isNaN(e)?-1:e},enumerable:!1,configurable:!0}),t.prototype._collideWithWorld=function(e){(this.parent?s.e.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position).subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition),this._oldPosition.addInPlace(this.ellipsoidOffset);var t=this.getScene().collisionCoordinator;this._collider||(this._collider=t.createCollider()),this._collider._radius=this.ellipsoid,this._collider.collisionMask=this._collisionMask;var r=e;this.applyGravity&&(r=e.add(this.getScene().gravity)),t.getNewPosition(this._oldPosition,r,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)},t.prototype._checkInputs=function(){this._localDirection||(this._localDirection=s.e.Zero(),this._transformedDirection=s.e.Zero()),this.inputs.checkInputs(),e.prototype._checkInputs.call(this)},t.prototype._decideIfNeedsToMove=function(){return this._needMoveForGravity||Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},t.prototype._updatePosition=function(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):e.prototype._updatePosition.call(this)},t.prototype.dispose=function(){this.inputs.clear(),e.prototype.dispose.call(this)},t.prototype.getClassName=function(){return"FreeCamera"},Object(i.c)([Object(n.o)()],t.prototype,"ellipsoid",void 0),Object(i.c)([Object(n.o)()],t.prototype,"ellipsoidOffset",void 0),Object(i.c)([Object(n.c)()],t.prototype,"checkCollisions",void 0),Object(i.c)([Object(n.c)()],t.prototype,"applyGravity",void 0),t}(a.a)}}]);
//# sourceMappingURL=2.babylonBundle.js.map